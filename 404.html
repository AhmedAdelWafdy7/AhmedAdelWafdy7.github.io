<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Redirecting...</title>
    <script>
      // Check if we're already at index.html or in a redirect loop
      const isIndexHtml = window.location.pathname.endsWith('index.html');
      const hasRedirected = sessionStorage.getItem('redirected') === 'true';
      
      if (!isIndexHtml && !hasRedirected) {
        // Set flag to prevent redirect loops
        sessionStorage.setItem('redirected', 'true');
        
        // Build the new URL
        const path = window.location.pathname.replace(/^\/+/, ''); // Remove leading slashes
        const search = window.location.search;
        const hash = window.location.hash;
        const newUrl = `/${path}${search}${hash}`;
        
        // Redirect to index.html with the path as a query parameter
        window.location.href = `/index.html?redirect=${encodeURIComponent(newUrl)}`;
      } else if (hasRedirected) {
        // Clear the flag if we've already redirected once
        sessionStorage.removeItem('redirected');
      }
    </script>
    <noscript>
      <meta http-equiv="refresh" content="0; url=/index.html">
    </noscript>
  </head>
  <body>
    <p>Redirecting to <a href="/">home page</a>...</p>
  </body>
</html>
