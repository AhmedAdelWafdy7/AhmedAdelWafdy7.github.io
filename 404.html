<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Redirecting...</title>
    <script>
      // Check if we're already at index.html or in a redirect loop
      const isIndexHtml = window.location.pathname.endsWith('index.html');
      const hasRedirected = sessionStorage.getItem('redirected') === 'true';
      
      if (!isIndexHtml && !hasRedirected) {
        // Set flag to prevent redirect loops
        sessionStorage.setItem('redirected', 'true');
        
        // Get the current path and clean it up
        let path = window.location.pathname;
        // Remove any trailing slashes and .html
        path = path.replace(/\/+$/, '').replace(/\.html$/, '');
        
        // If we're at the root, just go to index.html
        if (path === '') {
          window.location.href = '/index.html';
        } else {
          // Otherwise redirect to hash-based URL
          window.location.href = `/#${path}`;
        }
      } else if (hasRedirected) {
        // Clear the flag if we've already redirected once
        sessionStorage.removeItem('redirected');
        
        // If we still end up here, go to the home page
        window.location.href = '/';
      }
    </script>
    <noscript>
      <meta http-equiv="refresh" content="0; url=/index.html">
    </noscript>
  </head>
  <body>
    <p>Redirecting to <a href="/">home page</a>...</p>
  </body>
</html>
